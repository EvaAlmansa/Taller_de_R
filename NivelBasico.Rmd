---
title: "Nivel Basico"
author: "Geek and Tech Girls"
date: "17 de abril de 2017"
output: rmarkdown::github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Tutorial básico sobre R

Al terminar este tutorial tendrás unas nociones básicas de R y podrás:

* Instalar paquetes nuevos en R
* Crear un script de R
* Hacer operaciones básicas
* Utilizar distintos tipos de datos simples
* Crear vectores y vectores-factores
* Conocer los dataframes de R

## R Studio

En este taller utilizaremos R Studio. Consulta el [README](https://github.com/geekandtechgirls/Taller_de_R/blob/master/README.md) para saber más sobre cómo instalarlo. La interfaz de R Studio es así:

![](imgs/interfaz_R_studio.png)

Como ves, puedes ir escribiendo los comandos directamente en la línea de comandos, pero también puedes hacer un _script_ (un archivo con varios comandos juntos). Para ello nos vamos arriba a la izquierda: ![](imgs/new_file.png).

Además de _scripts_, podemos crear otros tipos de archivos como un _R notebook_ o _R markdown_, como los tutoriales del taller.

Para ejecutar las líneas del _script_ podemos usar _Run_ o hacer _Ctrl+Intro_.

Para añadir comentarios, utiliza la almohadilla: #.

### Instalando paquetes nuevos

Para instalar paquetes nuevos en R, tenemos dos opciones: 

* Usar el comando
```{r}
install.packages('nombre_del_paquete')
```
* Usar el gestor de paquetes (pestaña _Packages -> Install_)

![](imgs/instalar_paquete.png)

Cuando instalamos un paquete nuevo y lo queremos usar, se lo decimos a R de la siguiente manera:

```{r}
require(nombre_del_paquete)
```

### Ejercicio
__Instala el paquete 'ggplot2', muy útil para visualizar datos y hacer gráficas de todo tipo.__

```{r}
```

## Aritmética con R

Antes de operar sobre grandes cantidades de datos o usar estructuras de datos complejas, es bueno que nos familiaricemos más con la interfaz de R.

### Asignación de variables

En R podemos trabajar directamente con los datos o guardarlos en variables, para así poder tenerlos disponibles en todo momento y trabajar con ellos. El operador de asignación es __<-__. Por ejemplo:

```{r}
x <- 10
```

Si nos fijamos a la derecha, nos aparece la variable creada:
![](imgs/var_x.png)

Y para visualizar variables, lo único que tenemos que hacer es _llamarlas_:

```{r}
x
```

Así, podemos ponerle nombre a cualquier operación, además de a funciones. Ten siempre en cuenta que debes usar nombres de variables adecuados para que tu código siempre sea legible. 

### Operadores

Los operadores numéricos básicos de R son:

Operador | Símbolo
-------- | -------
Suma     | +
Resta    | - 
Multiplicación | *
División | /
Exponente | ^
Módulo | %%

Por ejemplo:

```{r}
1+2
```

O usando variables:

```{r}
edad_Nathan <- 6
edad_Fausto <- 5
edad_Kimi <- 1
edad_gatos <- edad_Nathan + edad_Fausto + edad_Kimi
edad_gatos
```

## Tipos de datos

Al igual que todos los lenguajes de programación, _R_ trabaja los tipos de datos básicos:

* __Numeric__: números decimales.
* __Integer__: números enteros. Para diferenciarlos de los numeric, se coloca una `L` al final de número.
* __Logical__: valores booleanos. En _R_, los valores booleanos son `TRUE` y `FALSE` aunque también se acepta `T` y `F`.
* __Character__: texto (_string_).

Para saber el tipo de una variable, se usa la función `class`:

```{r}
class(5.6)
class(5L)
class(T)
class(TRUE)
class("TRUE")
```

### Ejercicio
__Prueba a declarar una variable con un número decimal, pero poniéndole la `L` que se pone al declarar números enteros ¿qué pasa?__

```{r}
```

### Ejercicio
__Declara un entero sin la `L` al final y comprueba su tipo, ¿qué tipo de variable es?__

```{r}
```

## Vectores y factores

### Declaración de un vector

En _R_, podemos decir que todo elemento que hagamos, será un vector o _array_, con una longitud determinada, en la que almacenaramos información. Esta información que almacenamos pueden ser datos de tipo _int_, _char_, etc.  Un vector lo crearemos con la función _combine_ `c()` . En esta función introduciremos los datos que queremos almacenar en nuestro array uno detrás de otro, separados por una coma.

```{r}
dado <- c(1, 2, 3, 4, 5, 6)
letras <- c("a", "b", "c", "d", "e", "f")
```

#### Ejercicio

Este año has tenido la suerte de que te has ido a las Vegas y has decidido jugar y apostar en el poker y la ruleta. Durante estos cinco  días que llevas de vacaciones tus ingresos y pérdidas han sido:

* Lunes: has ganado 150$.
* Martes: has ganado 5$.
* Miércoles: has perdido 75$.
* Jueves: has perdido 128$ (vaya racha).
* Viernes: has ganado 15$.

Y en el caso de la ruleta:

* Lunes: has perdido 35$.
* Martes: has ganado 40$.
* Miércoles: has perdido 165$.
* Jueves: has ganado 12$ (vaya racha).
* Viernes: has ganado 178$.

Como tu futuro económico parece incierto, has decido usar tus recientemente adquiridas capacidades en R para analizar estos datos y usar tus habilidades estadísticas para decidir si apostar o no en el futuro. Para ello, empieza introduciendo estos datos en  dos vectores.

```{r}

```

### Asignar nombres a un vector

Además de crear un vector con datos, en muchos casos, como es en la ciencia de datos, es importante saber qué es cada dato o qué representan los datos de un vector. Esto es muy fácil y cómodo de hacer con la función `names()`. Esta función recibe como argumento nuestro recién y estrenado array y se le asigna un nuevo array que contiene los nombres que queremos asignarle a nuestros datos almacenados. Un ejemplo es el siguiente:

```{r}
un_plato <- c("Magdalenas", "Dulce")
elementos <- c("SSD", "Nuevo")

names(un_plato) <- c("Nombre", "Tipo")
names(otro_plato) <- c("Elemento", "Estado")
```

#### Ejercicio

Siguiendo con el estudio para asegurar tu futuro económico, es importante saber en qué día ganaste o perdiste dinero. Para ello, puedes usar la función que acabas de aprender para asignarle a cada valor el día de la semana correspondiente.



## Dataframes

Un ___Dataframe___ es una especie de _matriz_, en la que cada columna puede tener un tipo de dato diferente. Es muy parecido a una tabla. Por ejemplo, si queremos guardar datos sobre nuestros compañeros de clase podríamos hacer un _Dataframe_:

```{r}
nombre <- c("Paloma", "Cristina", "Ana", "Braulio", "Teresa")
num_favorito <- c(25L, 26L, 27L, 28L, 29L)
dulce_favorito <- c("Cupcake","Pastel","Bizcocho","Bombón","Pastel")
altura <- c(1.70, 1.75, 1.72, 1.80, 1.76)
es_chica <- c(T,T,T,F,T)

amigos <- data.frame(nombre, num_favorito, dulce_favorito, altura, es_chica)
amigos
```


#### Ejercicio

__Crea tu propio DataFrame sobre la lista de la compra, con los siguientes atributos:__

* __Nombre del producto__
* __Precio__
* __Cantidad a comprar__
* __¿Lleva aceite de palma?__

__Una vez hayas definido tu Dataframe, expórtalo a un csv con la función `write.csv` y vuélvelo a leer con la función `read.csv`. Para ver la documentación de estas dos funciones escribe `?nombre.de.la.funcion` en el intérprete de R.__

```{r}
```


Al igual que los vectores o las matrices, en los _Dataframe_ también podemos seleccionar elementos usando el operador `[]` y el operador `$`.

Podemos seleccionar toda una columna:

```{r}
amigos$nombre
amigos["nombre"]
```

El operador `$` devuelve un vector mientras que el `[]` devuelve un _Dataframe_ con una única columna.

Podemos seleccionar varias columnas, seleccionandolas con un vector:

```{r}
amigos[,c("nombre","altura")]
```

E incluso, podemos seleccionar unas determinadas filas:

```{r}
amigos[seq(1,3), c("nombre", "altura")]
```

¿Y si queremos las columnas/filas que __cumplan una determinada condición__? Para ello, tendremos que usar la función `subset`. Por ejemplo, queremos las personas cuyo postre favorito sean los _pasteles_.

```{r}
subset(x=amigos, subset=dulce_favorito=="Pastel", select=c(nombre, es_chica))
```

### Ejercicio
__Estudia la documentación de `subset` y selecciona aquellos productos de tu lista de la compra que tengan un precio inferior a 5€ y que además no contengan aceite de palma.__

```{r}
```

